<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speech Emotion Detection</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="logo">
            <p>TellTones.</p>
        </div>
        <div class="nav-links">
            <a href="/">About Us</a>
            <a href="/demo">Demo</a>
        </div>
    </nav>

    <!-- Placeholder Text Section -->
    <main>
        <section id="demonstration" class="container mt-5">
            <h1 class="text-center">Discover the Power of Emotion Recognition.</h1>
            <p class="text-center placeholder-text">
                Welcome to TellTones, where technology meets human emotions! <br>
                Our cutting-edge Speech Emotion Recognition app leverages advanced artificial intelligence to analyze
                voice data and detect the emotions behind spoken words.
                This powerful tool is designed to enhance human interactions,
                improve accessibility, and provide valuable insights into communication.
                Our AI model processes the audio to analyze vocal tone, pitch, and intensity, detecting 8 emotions, few of which are listed below :

                <div class="alert alert-primary" role="alert">
                    Sadness üò¢
                </div>
                <div class="alert alert-secondary" role="alert">
                    Neutral üòê
                </div>
                <div class="alert alert-success" role="alert">
                    Fear üò®
                </div>
                <div class="alert alert-danger" role="alert">
                    Anger üò°
                </div>
                <div class="alert alert-warning" role="alert">
                    Happiness üòä
                </div>
            </p>
        </section>

        <!-- File Upload and Prediction Section -->
        <form id="uploadForm" action="/predict" method="POST" enctype="multipart/form-data">
            <label for="file">
                <h2>Upload an audio file:</h2>
                <p>Select an audio file (supported formats: .wav, .mp3)</p>
            </label>

            <input type="file" name="file" accept=".wav, .mp3" required>
            <div class="d-grid gap-2">
                <button class="btn btn-primary" type="submit">Predict Emotion</button>
            </div>
        </form>

        <!-- Emotion Result Display -->
        <div id="emotionResult" style="display:none;">
        </div>

        <!-- JavaScript to Handle Form Submission and Prediction -->
        <script>
            document.getElementById('uploadForm').addEventListener('submit', function (e) {
                e.preventDefault();

                const formData = new FormData(this);

                fetch('/predict', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    const emotionResult = document.getElementById('emotionResult');
                    emotionResult.style.display = 'block'; // Make it visible

                    // Handle prediction response correctly based on the backend
                    if (data.predicted_emotion) {
                        emotionResult.innerHTML = `Predicted Emotion: ${data.predicted_emotion}`;
                    } else {
                        emotionResult.innerHTML = 'Error predicting emotion.';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    const emotionResult = document.getElementById('emotionResult');
                    emotionResult.style.display = 'block'; // Make it visible
                    emotionResult.innerHTML = 'An error occurred while predicting emotion.';
                });
            });
        </script>

        <!-- Info Cards Section -->
        <section id="info-cards" class="container mt-5">
            <div class="row">
                <h3>How do we help ?</h3>
                <div class="col-md-6 mb-4">
                    <div class="card card-blur shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">Enhanced Accessibility</h5>
                            <p class="card-text">This app improves accessibility for those with auditory or emotional impairments.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card card-blur shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">Emotion Detection</h5>
                            <p class="card-text">Accurate detection of emotions to provide deeper insights into user communication.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card card-blur shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">Real-Time Analysis</h5>
                            <p class="card-text">Get instant results to enhance user engagement and feedback mechanisms.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card card-blur shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">Custom Integration</h5>
                            <p class="card-text">Seamlessly integrate the app with other platforms for advanced applications.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer Section -->
    <footer id="footer" class="text-center mt-5 p-3">
        <p>&copy; 2024 TellTones. All Rights Reserved.</p>
    </footer>

    <!-- Bootstrap and Popper.js Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>
